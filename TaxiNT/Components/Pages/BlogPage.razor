@page "/blogs"
@layout MainLayoutClient

<SeoHeaderComponent Title="Tin tức - Taxi Nam Thắng"
                    Description="Cập nhật tin tức, khuyến mãi và hoạt động mới nhất của Taxi Nam Thắng tại Kiên Giang, Rạch Giá, Hà Tiên, Phú Quốc, Vĩnh Long, Cần Thơ, Bạc Liêu, Cà Mau, An Giang và miền Tây."
                    Image="imgs/customers/homepage.jpg" Unrobots="false" />

<div class="mx-auto max-w-7xl px-4 py-10">
    <h1 class="mb-6 text-3xl font-bold text-gray-800">Tin tức & Bài viết mới</h1>

    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
        @foreach (var item in blogs)
        {
            <a href="@($"blogs/{item.Slug}")"
               class="group block overflow-hidden rounded-2xl bg-white shadow transition-shadow duration-300 hover:shadow-lg">
                <div class="relative overflow-hidden">
                    <img src="@item.CoverImageUrl" alt="@item.Title"
                         class="h-56 w-full transform object-cover transition-transform duration-500 group-hover:scale-105" />

                    <div class="absolute inset-0 bg-black/10 transition-colors group-hover:bg-black/30"></div>
                </div>

                <div class="p-4">
                    <h2 class="line-clamp-2 text-lg font-semibold text-gray-900 transition-colors group-hover:text-blue-600">
                        @item.Title
                    </h2>
                    <p class="mt-2 line-clamp-3 text-sm text-gray-600">@item.Summary</p>

                    <div class="mt-4 flex items-center justify-between text-xs text-gray-500">
                        <div class="flex items-center gap-1">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                                 stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                      d="M8 7V3m8 4V3m-9 8h10m-7 4h4m-9 4h14M5 21h14a2 2 0 002-2V7H3v12a2 2 0 002 2z" />
                            </svg>
                            <span>@item.CreatedAt.ToString("dd/MM/yyyy")</span>
                        </div>

                        <div class="flex items-center gap-1">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                                 stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                      d="M15 10l4.553 2.276A2 2 0 0121 14.105V17a2 2 0 01-2 2H5a2 2 0 01-2-2v-2.895a2 2 0 011.447-1.829L9 10m6 0V7a3 3 0 00-6 0v3m6 0H9" />
                            </svg>
                            <span>@item.ViewCount</span>
                        </div>
                    </div>
                </div>
            </a>
        }
    </div>
</div>

@code {
    [Inject] IBlogService BlogService { get; set; } = default!;
    private List<Blog> blogs = new();

    protected override async Task OnInitializedAsync()
    {
        blogs = await BlogService.GetAllAsync();
    }
}
